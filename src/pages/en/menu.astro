---
import Layout from '../../layouts/Layout.astro';
import { getTranslations } from '../../i18n';
import menuData from '../../data/menu.json';

const lang = 'en';
const t = getTranslations(lang);

// Type helper
type MenuSection = 'coffee' | 'drinks' | 'brunch' | 'tostas' | 'pastries';
const sections: { key: MenuSection; items: typeof menuData.coffee }[] = [
  { key: 'coffee', items: menuData.coffee },
  { key: 'drinks', items: menuData.drinks },
  { key: 'brunch', items: menuData.brunch },
  { key: 'tostas', items: menuData.tostas },
  { key: 'pastries', items: menuData.pastries },
];
---

<Layout title={`${t.menu.title} — Dirty Rabbit`} lang={lang}>
  <!-- Hero Section -->
  <section class="py-16 md:py-24 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="font-typewriter text-5xl md:text-7xl font-bold mb-6 reveal">{t.menu.title}</h1>
      <div class="w-24 h-px bg-red mx-auto mb-8"></div>
      <a 
        href="https://order.dirtyrabbit.es"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-block bg-red text-white font-typewriter text-lg px-8 py-4 hover:bg-red/90 transition-colors"
      >
        {t.menu.orderOnline}
      </a>
    </div>
  </section>

  <!-- Menu Sections -->
  <section class="py-8 md:py-16 bg-cream">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      {sections.map((section, sectionIndex) => (
        <div class={`reveal ${sectionIndex > 0 ? 'mt-16 pt-16 border-t border-red' : ''}`}>
          <!-- Section Header -->
          <h2 class="font-typewriter text-3xl md:text-4xl font-bold text-red mb-8 text-center">
            {t.menu.categories[section.key]}
          </h2>
          
          <!-- Menu Items -->
          <div class="space-y-6">
            {section.items.map((item) => (
              <div class="flex items-baseline justify-between gap-4 group">
                <div class="flex-1 min-w-0">
                  <div class="flex items-baseline gap-2">
                    <h3 class="font-typewriter text-xl md:text-2xl font-bold group-hover:text-red transition-colors">
                      {item.name}
                    </h3>
                    <span class="flex-1 border-b border-dotted border-black/20"></span>
                  </div>
                  <p class="font-mono text-sm text-black/60 mt-1">
                    {(item.desc as any)[lang]}
                  </p>
                </div>
                <span class="font-typewriter text-2xl md:text-3xl font-bold text-red tabular-nums shrink-0">
                  €{item.price}
                </span>
              </div>
            ))}
          </div>
        </div>
      ))}
      
      <!-- Note about milk alternatives -->
      <div class="mt-16 pt-8 border-t border-black/10 text-center">
        <p class="font-mono text-sm text-black/50">{t.menu.note}</p>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Hamburger shop style - make prices really pop */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }
</style>
