---
import Layout from '../../layouts/Layout.astro';
import { getTranslations } from '../../i18n';
import proveedores from '../../data/proveedores.json';

const lang = 'fr';
const t = getTranslations(lang);
---

<Layout 
  title={`${t.producers.title} — Dirty Rabbit`}
  description="Nos producteurs : La Cabra (café de spécialité), REQ (matcha), Origo (pain au levain), et plus. Produits artisanaux sélectionnés avec soin pour votre petit-déjeuner."
  lang={lang}>
  
  <!-- Hero Section -->
  <section class="pt-8 pb-12 md:pt-12 md:pb-16 bg-cream">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="font-typewriter text-5xl md:text-6xl font-bold text-red mb-6">{t.producers.title}</h1>
      <div class="w-16 h-px bg-red mx-auto mb-8"></div>
      <p class="font-mono text-sm md:text-base text-black/70">
        {t.producers.intro}
      </p>
    </div>
  </section>

  <!-- Providers Grid -->
  <section class="py-12 md:py-16 bg-white">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {proveedores.map((p) => (
          <article class="group">
            <div class="aspect-square rounded-lg overflow-hidden mb-4 border border-black/10">
              <img 
                src={p.image || `/images/proveedores/${p.id}.jpg`}
                alt={p.name}
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                loading="lazy"
              />
            </div>
            <p class="font-mono text-xs text-red tracking-wider mb-1">
              {(p.category as any)[lang]}
            </p>
            <h3 class="font-typewriter text-xl font-bold mb-1">{p.name}</h3>
            <p class="font-mono text-xs text-black/60 mb-3">{p.origin}</p>
            <p class="font-mono text-sm text-black/70 leading-relaxed">
              {(p.description as any)[lang]}
            </p>
            {p.url && (
              <a 
                href={p.url}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-1 font-mono text-xs text-red hover:text-red/80 mt-3"
              >
                Visiter
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                </svg>
              </a>
            )}
          </article>
        ))}
      </div>
      
    </div>
  </section>

</Layout>
